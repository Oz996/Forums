(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{2748:function(e,t,r){Promise.resolve().then(r.bind(r,8586))},8586:function(e,t,r){"use strict";r.r(t);var s=r(7437),l=r(8740),a=r(667),o=r(1396),n=r.n(o),i=r(1865),u=r(3800),d=r(9222),m=r(4033),c=r(1349),x=r(2265),f=r(7415),h=r(4001);t.default=()=>{let[e,t]=(0,x.useState)(!1),{isAuthenticated:r}=(0,c.a)(),o=(0,m.useRouter)();(0,x.useEffect)(()=>{r&&o.push("/")},[r,o]);let{register:p,handleSubmit:g,formState:{errors:j}}=(0,i.cI)({userName:"",email:"",password:"",image:null}),registerMutation=async e=>{t(!0);let r=await d.Z.post("https://forums-api.onrender.com/users/register",e);return r.data},b=(0,h.D)(registerMutation,{onSuccess:e=>{t(!1),o.push("/login"),f.Am.success("Signed up")},onError:e=>{t(!1),console.error(e)}});return(0,s.jsxs)("div",{className:"mx-auto max-w-[30rem] mt-10 rounded-xl border shadow-lg p-10 flex flex-col gap-10",children:[(0,s.jsx)("h1",{className:"text-center font-semibold text-xl",children:"Register"}),(0,s.jsxs)("form",{className:"flex flex-col gap-5",onSubmit:g(e=>{b.mutate(e)}),children:[(0,s.jsx)(l.Y,{...p("userName",{required:"This field is required"}),type:"text",label:"Username"}),(0,s.jsx)(u.B,{errors:j,name:"userName",render:e=>{let{message:t}=e;return(0,s.jsx)("p",{className:"text-red-500 text-sm font-semibold",children:t})}}),(0,s.jsx)(l.Y,{...p("email",{required:"This field is required"}),type:"email",label:"Email"}),(0,s.jsx)(u.B,{errors:j,name:"email",render:e=>{let{message:t}=e;return(0,s.jsx)("p",{className:"text-red-500 text-sm font-semibold",children:t})}}),(0,s.jsx)(l.Y,{...p("password",{required:"This field is required"}),type:"password",label:"Password"}),(0,s.jsx)(u.B,{errors:j,name:"password",render:e=>{let{message:t}=e;return(0,s.jsx)("p",{className:"text-red-500 text-sm font-semibold",children:t})}}),(0,s.jsx)(l.Y,{...p("Cpassword",{required:"This field is required"}),type:"password",label:"Confirm Password"}),(0,s.jsx)(u.B,{errors:j,name:"Cpassword",render:e=>{let{message:t}=e;return(0,s.jsx)("p",{className:"text-red-500 text-sm font-semibold",children:t})}}),(0,s.jsx)(l.Y,{...p("image"),type:"text",label:"Image (optional)"}),(0,s.jsx)(a.A,{isLoading:e,type:"submit",className:"w-full",color:"secondary",children:"Sign up"})]}),(0,s.jsxs)("p",{className:"text-sm text-center",children:["Already a member?"," ",(0,s.jsx)(n(),{className:"underline text-blue-600",href:"/login",children:"Sign in"})," ","here"]})]})}},4543:function(e,t,r){"use strict";r.d(t,{H:function(){return AuthContextProvider},V:function(){return a}});var s=r(7437),l=r(2265);let a=(0,l.createContext)(null),AuthContextProvider=e=>{let{children:t}=e,[r,o]=(0,l.useState)(!1),[n,i]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("email");o(!!e),i(t)},[r]),(0,l.useEffect)(()=>{console.log(n)},[n]),(0,s.jsx)(a.Provider,{value:{isAuthenticated:r,userEmail:n,handleLogin:(e,t)=>{console.log("email:",e),o(!0),localStorage.setItem("token",t),localStorage.setItem("email",e),i(e)},handleLogout:()=>{o(!1),localStorage.removeItem("token"),localStorage.removeItem("email"),i(null)}},children:t})}},1349:function(e,t,r){"use strict";r.d(t,{a:function(){return useAuth}});var s=r(4543),l=r(2265);let useAuth=()=>{let e=(0,l.useContext)(s.V);if(!e)throw Error("Failed to use AuthContext");return e}}},function(e){e.O(0,[745,534,396,633,674,971,864,744],function(){return e(e.s=2748)}),_N_E=e.O()}]);